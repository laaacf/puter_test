---
version: "3.8"
services:
  puter:
    container_name: puter
    # 使用官方镜像
    image: ghcr.io/heyputer/puter:latest
    restart: unless-stopped
    ports:
      - '4100:4100'
    environment:
      TZ: Asia/Shanghai
      PUID: 1000
      PGID: 1000
    volumes:
      # 配置文件目录
      - ./config:/etc/puter
      # 数据目录
      - ./data:/var/puter
    # 禁用健康检查（避免 400 错误）
    # healthcheck:
    #   test: wget --no-verbose --tries=1 --spider http://127.0.0.1:4100/test || exit 1
    #   interval: 30s
    #   timeout: 3s
    #   retries: 3
    #   start_period: 30s
    labels:
      - "com.docker.compose.project=puter"
      - "description=Puter - 隐私优先的个人云系统"

# 注意：
# 此配置使用官方镜像，功能限制：
# - ❌ 不支持反向代理
# - ✅ 但可以通过配置文件启用部分功能
